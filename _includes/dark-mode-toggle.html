<label class="dark-mode-toggle" for="dark-mode-switch" aria-label="Toggle dark mode">
  <input type="checkbox" id="dark-mode-switch" class="dark-mode-switch">
  <span class="toggle-slider">
    <span class="toggle-icon toggle-icon-sun">
      <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor">
        <circle cx="10" cy="10" r="4" fill="currentColor"></circle>
        <path d="M10 2v2M10 16v2M4.93 4.93l1.41 1.41M13.66 13.66l1.41 1.41M2 10h2M16 10h2M4.93 15.07l1.41-1.41M13.66 6.34l1.41-1.41" stroke="currentColor" stroke-width="1.5" fill="none"></path>
      </svg>
    </span>
    <span class="toggle-icon toggle-icon-moon">
      <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor">
        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" fill="currentColor"></path>
      </svg>
    </span>
  </span>
</label>

<script>
(function() {
  // Wait for DOM to be ready
  function initDarkMode() {
    const darkModeSwitch = document.getElementById('dark-mode-switch');
    const html = document.documentElement;
    const body = document.body;
    
    if (!darkModeSwitch) return;
    
    // Check for saved theme preference or default to light mode
    const currentTheme = localStorage.getItem('theme') || 'light';
    
    // Set initial state
    if (currentTheme === 'dark') {
      html.classList.add('dark-mode');
      if (body) body.classList.add('dark-mode');
      darkModeSwitch.checked = true;
    } else {
      darkModeSwitch.checked = false;
    }
    
    // Toggle theme
    darkModeSwitch.addEventListener('change', function() {
      html.classList.toggle('dark-mode');
      if (body) body.classList.toggle('dark-mode');
      const isDark = html.classList.contains('dark-mode');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });
  }
  
  // Run immediately if DOM is ready, otherwise wait
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initDarkMode);
  } else {
    initDarkMode();
  }
})();
</script>
